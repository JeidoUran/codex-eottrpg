<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Oktar | Codex - Etrian Odyssey TTRPG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="../../favicon.png" type="image/png">
  <link rel="stylesheet" href="../../style.css">
</head>
<body>
<canvas id="particles"></canvas>

<header class="codex-header">
  <img src="../../assets/images/portraits/oktar.png" class="portrait-header" onclick="openLightbox(this.src)">
  <h1>Oktar</h1>
  <p class="sous-titre">Fléau des tyrans</p>
</header>

<nav class="nav-magique">
  <a href="/">Accueil</a>
  <a href="../../notes/">Patch Notes</a>
  <a href="../../rules/">Règles</a>
  <a href="../../lore/">Univers</a>
  <a href="../../music-player.html">Musiques</a>
  <a href="../../resources/">Ressources</a>
  <a href="../../credits.html">Crédits</a>
</nav>

<main class="patch-list">
  <article class="article-credits">
    <h2><i class="fa-solid fa-shield-halved"></i> Oktar</h2>
    <ul class="image-list">
      <li><img src="../../assets/images/notes-medium.png" class="image">
        <div class="image-texte">
          <strong>Race :</strong> Sentinelle<br>
          <strong>Classe :</strong> Impérial<br>
          <strong>Joueur :</strong> Tailos
        </div>
      </li>      
      <li><img src="../../assets/images/notes-medium.png" class="image">
        <div class="image-texte">
          <strong>Biographie :</strong><br>
          Oktar est un loup-sentinelle marqué par la guerre, l’amitié et la perte. Comme les autres membres de son groupe, il s’est réveillé il y a sept ans dans un orphelinat de Batavia, sans aucun souvenir de sa vie antérieure. On ne sait pas exactement quand il a rencontré celui qu’il considère comme son frère d’âme, un félin bavard et provocateur, mais leur lien s’est forgé dans l’adversité et les affrontements partagés.<br><br>
          Ensemble, ils deviennent mercenaires et tracent leur route à travers le continent. Oktar, impulsif mais loyal, tranche le mal à la racine sans détour. Jusqu’au jour où, revenu victorieux après avoir éliminé un baron corrompu, il retrouve son compagnon inerte. Ce choc le laisse brisé. On le retrouve plus tard à Voarmur, de nouveau arrêté après un débordement.<br><br>
          C’est là qu’il l’aperçoit, dans la foule : son ancien compagnon, ou une illusion, entrant dans le Labyrinthe. Cette vision ranime quelque chose en lui. Libéré, il revient à l’orphelinat de Batavia pour proposer à son groupe d’y aller ensemble. Et cette fois, ils y vont unis.
        </div>
      </li>
    </ul>
  </article>
  <article class="stats">
    <h3>Caractéristiques</h3>
    <ul class="image-list">
      <li><img src="../../assets/images/notes-medium.png" class="image">
        <div class="image-texte" id="oktar-stats">
          <em>Chargement des données d'Oktar...</em>
        </div>
      </li>
    </ul>
  </article>
  <p id="last-updated" class="timestamp">Chargement...</p>
</main>
<div id="lightbox" class="lightbox" onclick="closeLightbox()">
  <img id="lightbox-img" src="" alt="Portrait" />
</div>
<footer>
  <p>© 2025 • Wizardofaz, Rashaza, Jeido, ChatGPT</p>
</footer>
<script>
  const oktarUrl = "https://s3.codex.eottrpg.memiroa.com/data/oktar.json";
  
  fetch(oktarUrl)
    .then(res => res.json())
    .then(json => {
      const data = json.data;
      const abilities = data.system.abilities;
      const stats = document.getElementById("oktar-stats");

      if (!data.system || !data.system.attributes || !data.system.abilities) {
        stats.innerHTML = "<em>Données d'Oktar incomplètes.</em>";
        return;
      }

      stats.innerHTML = `
        <strong>PV :</strong> ${data.system.attributes.hp.value ?? "?"} / ${data.system.attributes.hp.max ?? "?"}<br>
        <strong>Défense :</strong> ${data.system.attributes.ac.value ?? "?"}<br>
        <strong>Force :</strong> ${abilities.str.value ?? "?"}<br>
        <strong>Dextérité :</strong> ${abilities.dex.value ?? "?"}<br>
        <strong>Constitution :</strong> ${abilities.con.value ?? "?"}<br>
        <strong>Intelligence :</strong> ${abilities.int.value ?? "?"}<br>
        <strong>Sagesse :</strong> ${abilities.wis.value ?? "?"}<br>
        <strong>Charisme :</strong> ${abilities.cha.value ?? "?"}
      `;
  
      const updated = new Date(json._codexLastUpdate);
      document.getElementById("last-updated").textContent =
        "Dernière mise à jour : " + updated.toLocaleString("fr-FR", {
          dateStyle: "short",
          timeStyle: "short"
        });
    })
    .catch(err => {
      console.error("Erreur lors du chargement des données Oktar :", err);
      document.getElementById("oktar-stats").innerHTML =
        "<em>Données indisponibles. Le fichier JSON n'a pas été trouvé ou le serveur est hors ligne.</em>";
      document.getElementById("last-updated").textContent = "";
    });
  </script>  
<script>
  function openLightbox(src) {
    const lightbox = document.getElementById("lightbox");
    const img = document.getElementById("lightbox-img");
    img.src = src;
    lightbox.style.display = "flex";
  }

  function closeLightbox() {
    document.getElementById("lightbox").style.display = "none";
  }
</script>
<script src="../../particles.js"></script>
</body>
</html>